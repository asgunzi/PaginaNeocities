<!doctype html>
<html>
<head>
<meta charset="utf-8"/>

<title>Forgotten Math</title>

<script src="https://d3js.org/d3.v4.min.js"></script>
<script src="https://unpkg.com/mathjs/lib/browser/math.js"></script>

<link rel="stylesheet" type="text/css"  href="../estilo_menu.css" />

<style>
#normal {
  font-size: 35px;
  text-align: justify;
  text-justify: inter-word;
  color: #f5f5f0; 
  margin: 50px;
}

.felizes{
  color: #cc9900;
}
	
</style>
</head>



<body>


<div class="menu"></div>

<a href = "../index.html"> <p id="Logo"></p> </a>

<form>
	N max:
	<input type="text" id="idA" onchange="Rodar()" value="800">
	<p> </p>

	<button type = "button"  onclick="Rodar()" tabindex = "0">Rodar</button>  
		
</form>



<h1>Arte com Números Felizes</h1>

<p id= "normal"> </p>


<hr>
<p>Veja também: <a href = "https://ideiasesquecidas.com/"> Forgotten Lore - Ideias Técnicas com uma pitada de filosofia. </a> </p>

<script>


Rodar();


function Rodar()
{
	let i;
	let str1 = "";
	let Nmax;
	var result;
	
	//Busca Nmax números

	Nmax = parseInt(d3.select("#idA").property("value"))+1;
	
	result =findHappyNumbers(100);
	
	for (i=1;i<Nmax; i++)
	{	
	
		if (result.includes(i))
		{
		str1 += '<b class = "felizes"> ' + parseInt(i) + '</b> ';
		}
		else
		{
		str1 += parseInt(i) + " ";
		}

	}
	
    d3.select("#normal")
      .html(str1)
}	
	
function isHappy(number) {
    let pastNumbers = new Set();
    while (number !== 1 && !pastNumbers.has(number)) {
        pastNumbers.add(number);
        number = number.toString().split('').reduce((sum, digit) => sum + Math.pow(parseInt(digit), 2), 0);
    }
    return number === 1;
}

function findHappyNumbers(limit) {
    const happyNumbers = [];
    let num = 1;
    while (happyNumbers.length < limit) {
        if (isHappy(num)) {
            happyNumbers.push(num);
        }
        num++;
    }
    return happyNumbers;
}


</script>

<script src="../criaMenuL1.js"></script>

<script src = '../LogoMath.js'>		</script>

</body>
</html>
