<!doctype html>
<html>
<head>
<meta charset="utf-8"/>

<title>Forgotten Math</title>

<script src="https://d3js.org/d3.v4.min.js"></script>
<link rel="stylesheet" type="text/css"  href="../estilo_menu.css" />

<style>  
</style>

</head>


<body>


<div class="menu"></div>

<a href = "../index.html"> <p id="Logo"></p> </a>
<h1>Arte com Círculos</h1>

<div class="slidecontainer" onchange= "Desenhar()">
Aleatoriedade: 
  <input type="range" min="1" max="10" value="5" class="slider" id="myRange">
</div>

<p id = "svgCirculos"></p>

<br>
<hr>

<p>Veja também:</p>

<p><a href="https://asgunzi.neocities.org">Forgotten Math</a></p>


<p><a href = "https://ideiasesquecidas.com/"> Forgotten Lore - Ideias Técnicas com uma pitada de filosofia. </a></p>

<script src="../criaMenuL1.js"></script>
<script src = "../LogoMath.js">		</script>

<script>

    var svg = d3.select("#svgCirculos")
        .append("svg")
        .attr("width", 1200)
        .attr("height", 800);

   
	Desenhar();

	function Desenhar()
	{
	
	var i;
	var j;
	var delayInMilliseconds=0;
	var Naleat = parseInt(d3.select("#myRange").property("value"));
	var arrRnd=[];
	var idxi=0;
	var idxj=0;
	
	svg.selectAll("*").remove();
	
	//Cria array e randomiza
	for (i=0; i< 30; i++)
		for (j=0; j< 30; j++)
			arrRnd.push(i + 30*j);
	
	
	shuffle(arrRnd);
		
	for (i=0; i< 30; i++)
	{

	for (j=0; j< 30; j++)
	{
		idxi = arrRnd[i +30*j] % 30;
		idxj = Math.floor(arrRnd[i +30*j] / 30);
		
	
	delayInMilliseconds +=2;
	//setTimeout(function (){elo(i)}, delayInMilliseconds,i);
	setTimeout(elo.bind(null,idxi,idxj,Naleat), delayInMilliseconds,idxi,idxj,Naleat);	  
	}	
	}
	}
	
	
	function elo(i,j,Naleat)
	{
		
	var x0;
	var y0;
	var R;
	var ang;
	var r;
		
	R =30;
	x0 = 5;
	y0= 5;
	
	r =10;
	
	
		//Rotina	
			svg.append("circle")
		  .attr("cx", x0 + R*(i+1) )
		  .attr("cy", y0+ R*(j+1) )
		  .attr("r", r+(Math.random()-0.5)*(Naleat-1))
		  .attr("stroke", "black")
		  .attr("stroke-width", 1)
		  .attr("fill", function(d) {
          return d3.schemeCategory10[Math.floor(Math.random() * Naleat)];
        });
		 }
		 
	 function shuffle(array) {
		for (let i = array.length - 1; i > 0; i--) {
			let j = Math.floor(Math.random() * (i + 1)); // random index from 0 to i
			[array[i], array[j]] = [array[j], array[i]];
		}
	}
</script>
</body>
</html>