<!doctype html>
<html>
<head>
<meta charset="utf-8"/>

<title>Forgotten Math</title>

<script src="https://d3js.org/d3.v4.min.js"></script>
<link rel="stylesheet" type="text/css"  href="../estilo_menu.css" />

<style>  
</style>

</head>


<body>


<div class="menu"></div>

<a href = "../index.html"> <p id="Logo"></p> </a>

<div class="slidecontainer" onchange= "Desenhar()">
<form>

Raio: 
  <input type="range" min="50" max="200" value="80" class="slider" id="myRange">

	N. Cores:
		  <select onchange = "Desenhar()" id="SelectCores">
		    
		    <option value="1"  >1</option>
		    <option value="2">2</option>
		    <option value="3">3</option>
		    <option value="4">4</option>
		    <option value="5" selected>5</option>
			<option value="10">10</option>			
			<option value="20">20</option>			
		  </select>		  
</form>

</div>

<p id="svgRef"></p>


<br>
<hr>

<p>Veja também:</p>

<p><a href="https://asgunzi.neocities.org">Forgotten Math</a></p>


<p><a href = "https://ideiasesquecidas.com/"> Forgotten Lore - Ideias Técnicas com uma pitada de filosofia. </a></p>

<script src="../criaMenuL1.js"></script>
<script src = "../LogoMath.js">		</script>

<script>
// Defina as propriedades do hexágono
var width = 1000; // largura do contêiner SVG
var height = 800; // altura do contêiner SVG


// Crie um contêiner SVG
var svg = d3.select("#svgRef")
    .append("svg")
    .attr("width", width)
    .attr("height", height);


function Desenhar()
{
	var x;
	var y;
	var R;
	var dx0;
	var arrRnd=[];
	var idxi;
	var idxj;
	var delayInMilliseconds =0;
	var par1;
	var par2;
	var ncolors;
	
	R = parseInt(d3.select("#myRange").property("value"));
	ncolors = parseInt(d3.select("#SelectCores").property("value"));
	x=100;
	y=100;

	svg.selectAll("*").remove();

	for (i=0; i< 50; i++)
		for (j=0; j< 50; j++)
			arrRnd.push(i + 50*j);
		
	shuffle(arrRnd);
	
	for (i =0; i<50;i++)
		{for (j=0; j<50; j++)
			{
					idxi = arrRnd[i +50*j] % 50;
					idxj = Math.floor(arrRnd[i +50*j] / 50);


					delayInMilliseconds +=1.5;
					par1 = idxi*R;
					par2 = idxj*R;
					
					setTimeout(QuarterTil.bind(null,par1,par2,R,ncolors), delayInMilliseconds,par1,par2,R,ncolors);	  
					
				}	
				
			}
		
}

function shuffle(array) {
	for (let i = array.length - 1; i > 0; i--) {
		let j = Math.floor(Math.random() * (i + 1)); // random index from 0 to i
		[array[i], array[j]] = [array[j], array[i]];
	}
}

function QuarterTil(xi,yi,Ri,ncolors)
	{
		//Posicao xi, yi
		//Raio Ri
		//Número de pontos n
		var cor1 =d3.schemeCategory20c[Math.floor(Math.random() * ncolors)];

		svg.append("rect")
		  .attr("x", xi)
		  .attr("y", yi)
		  .attr("width", Ri)
		  .attr("height", Ri)
		  .attr("stroke", "white")
		  .attr("fill", cor1)
		
		var pi = Math.PI;
		
		var cor2 = d3.schemeCategory20b[Math.floor(Math.random() * ncolors)];
		var boolRnd = false;
		Math.random() < 0.5 ? boolRnd =false :  boolRnd =true;
	
	
		if (boolRnd)
		{
			var arc1 = d3.arc()
			.innerRadius(0)
			.outerRadius(Ri/2)
			.startAngle(0* (pi/180)) //converting from degs to radians
			.endAngle(90* (pi/180)) //just radians
			
			var arc2 = d3.arc()
			.innerRadius(0)
			.outerRadius(Ri/2)
			.startAngle(180* (pi/180)) //converting from degs to radians
			.endAngle(270* (pi/180)) //just radians

			svg.append("path")
			.attr("d", arc1)
			.attr("transform", "translate(" + xi + "," + (yi + Ri) + " )")
			.attr("stroke", "white")
			.attr("fill", cor2)

			svg.append("path")
			.attr("d", arc2)
			.attr("transform", "translate(" + (xi +Ri )+"," + yi  +" )")
			.attr("stroke", "white")
			.attr("fill", cor2)

		}
		else
		{
			var arc1 = d3.arc()
			.innerRadius(0)
			.outerRadius(Ri/2)
			.startAngle(90* (pi/180)) //converting from degs to radians
			.endAngle(180* (pi/180)) //just radians
			
			var arc2 = d3.arc()
			.innerRadius(0)
			.outerRadius(Ri/2)
			.startAngle(270* (pi/180)) //converting from degs to radians
			.endAngle(360* (pi/180)) //just radians

			svg.append("path")
			.attr("d", arc1)
			.attr("transform", "translate(" + xi + "," + (yi) + " )")
			.attr("stroke", "white")
			.attr("fill", cor2)

			svg.append("path")
			.attr("d", arc2)
			.attr("transform", "translate(" + (xi +Ri )+"," + (yi+Ri)  +" )")
			.attr("stroke", "white")
			.attr("fill", cor2)

		};
		
		}

Desenhar();
       		 
		 
</script>

</body>
</html>